<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Subsetting Data</title>
    <meta charset="utf-8" />
    <meta name="author" content="Dr. Mine Dogucu" />
    <link rel="stylesheet" href="slide-style.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">


class: title-slide









&lt;br&gt;
&lt;br&gt;
.right-panel[ 

# Subsetting Data
## Dr. Mine Dogucu
]

---





```r
glimpse(lapd)
```

```
## Rows: 68,564
## Columns: 35
## $ row_id                     &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "3…
## $ year                       &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, …
## $ department_title           &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police …
## $ payroll_department         &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301, …
## $ record_number              &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 100023…
## $ job_class_title            &lt;chr&gt; "Police Detective II", "Clerk Typist", "Po…
## $ employment_type            &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Fu…
## $ hourly_or_event_rate       &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42, …
## $ projected_annual_salary    &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24,…
## $ q1_payments                &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 20…
## $ q2_payments                &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 24…
## $ q3_payments                &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 21…
## $ q4_payments                &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 25…
## $ payments_over_base_pay     &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1376…
## $ percent_over_base_pay      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ total_payments             &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24,…
## $ base_pay                   &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71,…
## $ permanent_bonus_pay        &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.0…
## $ longevity_bonus_pay        &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.1…
## $ temporary_bonus_pay        &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, 6…
## $ lump_sum_pay               &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00, …
## $ overtime_pay               &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00, …
## $ other_pay_adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80,…
## $ other_pay_payroll_explorer &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.1…
## $ mou                        &lt;dbl&gt; 24, 3, 24, 24, 12, 3, 24, 24, 24, 24, 24, …
## $ mou_title                  &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", "…
## $ fms_department             &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70…
## $ job_class                  &lt;dbl&gt; 2223, 1358, 2227, 2232, 1839, 2207, 2214, …
## $ pay_grade                  &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "B…
## $ average_health_cost        &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 10…
## $ average_dental_cost        &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 40…
## $ average_basic_life         &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.4…
## $ average_benefit_cost       &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 11…
## $ benefits_plan              &lt;chr&gt; "Police", "City", "Police", "Police", "Cit…
## $ job_class_link             &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf",…
```

---


```r
colnames(lapd)
```

```
##  [1] "row_id"                     "year"                      
##  [3] "department_title"           "payroll_department"        
##  [5] "record_number"              "job_class_title"           
##  [7] "employment_type"            "hourly_or_event_rate"      
##  [9] "projected_annual_salary"    "q1_payments"               
## [11] "q2_payments"                "q3_payments"               
## [13] "q4_payments"                "payments_over_base_pay"    
## [15] "percent_over_base_pay"      "total_payments"            
## [17] "base_pay"                   "permanent_bonus_pay"       
## [19] "longevity_bonus_pay"        "temporary_bonus_pay"       
## [21] "lump_sum_pay"               "overtime_pay"              
## [23] "other_pay_adjustments"      "other_pay_payroll_explorer"
## [25] "mou"                        "mou_title"                 
## [27] "fms_department"             "job_class"                 
## [29] "pay_grade"                  "average_health_cost"       
## [31] "average_dental_cost"        "average_basic_life"        
## [33] "average_benefit_cost"       "benefits_plan"             
## [35] "job_class_link"
```

---

## subsetting variables/columns

&lt;img src="img/data-wrangle.001.jpeg" width="80%" /&gt;

--

`select()`

---

## subsetting observations/rows

&lt;img src="img/data-wrangle.002.jpeg" width="80%" /&gt;

`slice()` and `filter()` 

---

`select` is used to select certain variables in the data frame. 


.left-panel[

```r
select(lapd, year, base_pay)
```

```
## # A tibble: 68,564 x 2
##     year base_pay
##    &lt;dbl&gt;    &lt;dbl&gt;
##  1  2013  105765.
##  2  2013   47662.
##  3  2013  101288.
##  4  2013  118087.
##  5  2013   90322.
##  6  2013   62770.
##  7  2013   93718.
##  8  2013       0 
##  9  2013   51246.
## 10  2013   74227.
## # … with 68,554 more rows
```
]

--

.right-panel[


```r
lapd %&gt;% 
  select(year, base_pay)
```

```
## # A tibble: 68,564 x 2
##     year base_pay
##    &lt;dbl&gt;    &lt;dbl&gt;
##  1  2013  105765.
##  2  2013   47662.
##  3  2013  101288.
##  4  2013  118087.
##  5  2013   90322.
##  6  2013   62770.
##  7  2013   93718.
##  8  2013       0 
##  9  2013   51246.
## 10  2013   74227.
## # … with 68,554 more rows
```

]

---

`select` can also be used to drop certain variables if used with a negative sign.


```r
select(lapd, -row_id, -department_title)
```

```
## # A tibble: 68,564 x 33
##     year payroll_departm… record_number job_class_title employment_type
##    &lt;dbl&gt;            &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;          
##  1  2013             4301    1000027830 Police Detecti… Full Time      
##  2  2013             4302    1000155488 Clerk Typist    Full Time      
##  3  2013             4301    1000194958 Police Sergean… Full Time      
##  4  2013             4301    1000232317 Police Lieuten… Full Time      
##  5  2013             4302    1000329284 Principal Stor… Full Time      
##  6  2013             4302    1001124320 Police Service… Full Time      
##  7  2013             4301    1001221822 Police Officer… Full Time      
##  8  2013             4301    1001243583 Police Sergean… Full Time      
##  9  2013             4301    1001317832 Police Officer… Full Time      
## 10  2013             4301     100162910 Police Officer… Full Time      
## # … with 68,554 more rows, and 28 more variables: hourly_or_event_rate &lt;dbl&gt;,
## #   projected_annual_salary &lt;dbl&gt;, q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;,
## #   q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;, payments_over_base_pay &lt;dbl&gt;,
## #   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
## #   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
## #   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;,
## #   other_pay_adjustments &lt;dbl&gt;, other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;dbl&gt;,
## #   mou_title &lt;chr&gt;, fms_department &lt;dbl&gt;, job_class &lt;dbl&gt;, pay_grade &lt;chr&gt;,
## #   average_health_cost &lt;dbl&gt;, average_dental_cost &lt;dbl&gt;,
## #   average_basic_life &lt;dbl&gt;, average_benefit_cost &lt;dbl&gt;, benefits_plan &lt;chr&gt;,
## #   job_class_link &lt;chr&gt;
```

---

## Selection helpers

`starts_with()`  
`ends_with()`  
`contains()`  

---


```r
select(lapd, starts_with("q"))
```

```
## # A tibble: 68,564 x 4
##    q1_payments q2_payments q3_payments q4_payments
##          &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1      24931.      29182.      26546.      29605.
##  2      11344.      13212.      11508.      13443.
##  3      24184       28327.      28744.      33225.
##  4      29391.      36591.      32905.      37234.
##  5      20813       24136       21518.      25231.
##  6      16057.      17927.      14150.      17052.
##  7      22162.      25664.      23404.      24586.
##  8          0           0         331.          0 
##  9      11941.      14330.      13404.      14537.
## 10      17046.      20457.      18777.      21371.
## # … with 68,554 more rows
```

---


```r
select(lapd, ends_with("pay"))
```

```
## # A tibble: 68,564 x 8
##    payments_over_b… percent_over_ba… base_pay permanent_bonus… longevity_bonus…
##               &lt;dbl&gt;            &lt;dbl&gt;    &lt;dbl&gt;            &lt;dbl&gt;            &lt;dbl&gt;
##  1            4499.                0  105765.            3174.               0 
##  2            1845.                0   47662.               0             1311.
##  3           13192.                0  101288.            7364.               0 
##  4           18035.                0  118087.            7087.               0 
##  5            1376.                0   90322.               0             1251.
##  6            2415.                0   62770.               0             1726.
##  7            2099.                0   93718.             866.               0 
##  8             331.                0       0                0                0 
##  9            2967.                0   51246.            1540.               0 
## 10            3424.                0   74227.            2233.               0 
## # … with 68,554 more rows, and 3 more variables: temporary_bonus_pay &lt;dbl&gt;,
## #   lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;
```

---


```r
select(lapd, contains("pay"))
```

```
## # A tibble: 68,564 x 17
##    payroll_departm… q1_payments q2_payments q3_payments q4_payments
##               &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
##  1             4301      24931.      29182.      26546.      29605.
##  2             4302      11344.      13212.      11508.      13443.
##  3             4301      24184       28327.      28744.      33225.
##  4             4301      29391.      36591.      32905.      37234.
##  5             4302      20813       24136       21518.      25231.
##  6             4302      16057.      17927.      14150.      17052.
##  7             4301      22162.      25664.      23404.      24586.
##  8             4301          0           0         331.          0 
##  9             4301      11941.      14330.      13404.      14537.
## 10             4301      17046.      20457.      18777.      21371.
## # … with 68,554 more rows, and 12 more variables: payments_over_base_pay &lt;dbl&gt;,
## #   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
## #   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
## #   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;,
## #   other_pay_adjustments &lt;dbl&gt;, other_pay_payroll_explorer &lt;dbl&gt;,
## #   pay_grade &lt;chr&gt;
```

---

## subsetting variables/columns

&lt;img src="img/data-wrangle.001.jpeg" width="80%" /&gt;

--

`select()`

---

## subsetting observations/rows

&lt;img src="img/data-wrangle.002.jpeg" width="80%" /&gt;

`slice()` and `filter()` 

---

.pull-left[
`slice()` subsetting rows based on a row number.

The data below include all the rows from third to seventh. Including third and seventh.


```r
slice(lapd, 3:7)
```

```
## # A tibble: 5 x 35
##   row_id  year department_title payroll_departm… record_number job_class_title
##   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;          
## 1 3-100…  2013 Police (LAPD)                4301    1000194958 Police Sergean…
## 2 3-100…  2013 Police (LAPD)                4301    1000232317 Police Lieuten…
## 3 3-100…  2013 Police (LAPD)                4302    1000329284 Principal Stor…
## 4 3-100…  2013 Police (LAPD)                4302    1001124320 Police Service…
## 5 3-100…  2013 Police (LAPD)                4301    1001221822 Police Officer…
## # … with 29 more variables: employment_type &lt;chr&gt;, hourly_or_event_rate &lt;dbl&gt;,
## #   projected_annual_salary &lt;dbl&gt;, q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;,
## #   q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;, payments_over_base_pay &lt;dbl&gt;,
## #   percent_over_base_pay &lt;dbl&gt;, total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;,
## #   permanent_bonus_pay &lt;dbl&gt;, longevity_bonus_pay &lt;dbl&gt;,
## #   temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;, overtime_pay &lt;dbl&gt;,
## #   other_pay_adjustments &lt;dbl&gt;, other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;dbl&gt;,
## #   mou_title &lt;chr&gt;, fms_department &lt;dbl&gt;, job_class &lt;dbl&gt;, pay_grade &lt;chr&gt;,
## #   average_health_cost &lt;dbl&gt;, average_dental_cost &lt;dbl&gt;,
## #   average_basic_life &lt;dbl&gt;, average_benefit_cost &lt;dbl&gt;, benefits_plan &lt;chr&gt;,
## #   job_class_link &lt;chr&gt;
```


]

--

.pull-right[

`filter()` subsetting rows based on a condition.

The data below includes rows when the recorded year is 2018.


```r
filter(lapd, year == 2018)
```

```
## # A tibble: 14,824 x 35
##    row_id  year department_title payroll_departm… record_number job_class_title
##    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;          
##  1 8-100…  2018 Police (LAPD)                4301    1000027830 Police Detecti…
##  2 8-100…  2018 Police (LAPD)                4301    1000194958 Police Sergean…
##  3 8-100…  2018 Police (LAPD)                4301    1000232317 Police Lieuten…
##  4 8-100…  2018 Police (LAPD)                4302    1001124320 Police Service…
##  5 8-100…  2018 Police (LAPD)                4301    1001221822 Police Officer…
##  6 8-100…  2018 Police (LAPD)                4301    1001317832 Police Officer…
##  7 8-100…  2018 Police (LAPD)                4301     100162910 Police Officer…
##  8 8-100…  2018 Police (LAPD)                4301    1001675957 Police Officer…
##  9 8-100…  2018 Police (LAPD)                4302    1001884819 Equipment Mech…
## 10 8-100…  2018 Police (LAPD)                4302    1001893163 Detention Offi…
## # … with 14,814 more rows, and 29 more variables: employment_type &lt;chr&gt;,
## #   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
## #   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
## #   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
## #   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
## #   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;,
## #   overtime_pay &lt;dbl&gt;, other_pay_adjustments &lt;dbl&gt;,
## #   other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;dbl&gt;, mou_title &lt;chr&gt;,
## #   fms_department &lt;dbl&gt;, job_class &lt;dbl&gt;, pay_grade &lt;chr&gt;,
## #   average_health_cost &lt;dbl&gt;, average_dental_cost &lt;dbl&gt;,
## #   average_basic_life &lt;dbl&gt;, average_benefit_cost &lt;dbl&gt;, benefits_plan &lt;chr&gt;,
## #   job_class_link &lt;chr&gt;
```

]

---

.pull-left[

### Relational Operators in R


| Operator | Description              |
|----------|--------------------------|
| &lt;        | Less than                |
| &gt;        | Greater than             |
| &lt;=       | Less than or equal to    |
| &gt;=       | Greater than or equal to |
| ==       | Equal to                 |
| !=       | Not equal to             |

]

.pull-right[

### Logical Operators in R

| Operator | Description |
|----------|-------------|
| &amp;        | and         |
| &amp;#124;   | or          |

]

---

class: middle

Q. According to [datausa.io](https://datausa.io/profile/geo/los-angeles-ca#:~:text=In%202018%2C%20Los%20Angeles%2C%20CA,%2462%2C474%2C%20a%203.78%25%20increase.) Los Angeles had a median household income of $62474 in 2018. How many LAPD staff members had a base pay higher than $62474 in year 2018 according to this data?

.footnote[Median household income is **not** the same thing as median employee income. Our aim is data wrangling and not necessarily statistical analysis for now.]

---


```r
lapd %&gt;% 
  filter(year == 2018 &amp; base_pay &gt; 62474)
```

```
## # A tibble: 11,690 x 35
##    row_id  year department_title payroll_departm… record_number job_class_title
##    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;          
##  1 8-100…  2018 Police (LAPD)                4301    1000027830 Police Detecti…
##  2 8-100…  2018 Police (LAPD)                4301    1000194958 Police Sergean…
##  3 8-100…  2018 Police (LAPD)                4301    1000232317 Police Lieuten…
##  4 8-100…  2018 Police (LAPD)                4302    1001124320 Police Service…
##  5 8-100…  2018 Police (LAPD)                4301    1001221822 Police Officer…
##  6 8-100…  2018 Police (LAPD)                4301    1001317832 Police Officer…
##  7 8-100…  2018 Police (LAPD)                4301     100162910 Police Officer…
##  8 8-100…  2018 Police (LAPD)                4301    1001675957 Police Officer…
##  9 8-100…  2018 Police (LAPD)                4302    1001884819 Equipment Mech…
## 10 8-100…  2018 Police (LAPD)                4302    1001893163 Detention Offi…
## # … with 11,680 more rows, and 29 more variables: employment_type &lt;chr&gt;,
## #   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
## #   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
## #   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
## #   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
## #   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;,
## #   overtime_pay &lt;dbl&gt;, other_pay_adjustments &lt;dbl&gt;,
## #   other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;dbl&gt;, mou_title &lt;chr&gt;,
## #   fms_department &lt;dbl&gt;, job_class &lt;dbl&gt;, pay_grade &lt;chr&gt;,
## #   average_health_cost &lt;dbl&gt;, average_dental_cost &lt;dbl&gt;,
## #   average_basic_life &lt;dbl&gt;, average_benefit_cost &lt;dbl&gt;, benefits_plan &lt;chr&gt;,
## #   job_class_link &lt;chr&gt;
```


---



```r
lapd %&gt;% 
  filter(year == 2018 &amp; base_pay &gt; 62474) %&gt;% 
  nrow()
```

```
## [1] 11690
```

---

Q. How many observations are available between 2013 and 2015 including 2013 and 2015?

--


```r
lapd %&gt;% 
  filter(year &gt;= 2013 &amp; year &lt;= 2015)
```

```
## # A tibble: 40,227 x 35
##    row_id  year department_title payroll_departm… record_number job_class_title
##    &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;                       &lt;dbl&gt;         &lt;dbl&gt; &lt;chr&gt;          
##  1 3-100…  2013 Police (LAPD)                4301    1000027830 Police Detecti…
##  2 3-100…  2013 Police (LAPD)                4302    1000155488 Clerk Typist   
##  3 3-100…  2013 Police (LAPD)                4301    1000194958 Police Sergean…
##  4 3-100…  2013 Police (LAPD)                4301    1000232317 Police Lieuten…
##  5 3-100…  2013 Police (LAPD)                4302    1000329284 Principal Stor…
##  6 3-100…  2013 Police (LAPD)                4302    1001124320 Police Service…
##  7 3-100…  2013 Police (LAPD)                4301    1001221822 Police Officer…
##  8 3-100…  2013 Police (LAPD)                4301    1001243583 Police Sergean…
##  9 3-100…  2013 Police (LAPD)                4301    1001317832 Police Officer…
## 10 3-100…  2013 Police (LAPD)                4301     100162910 Police Officer…
## # … with 40,217 more rows, and 29 more variables: employment_type &lt;chr&gt;,
## #   hourly_or_event_rate &lt;dbl&gt;, projected_annual_salary &lt;dbl&gt;,
## #   q1_payments &lt;dbl&gt;, q2_payments &lt;dbl&gt;, q3_payments &lt;dbl&gt;, q4_payments &lt;dbl&gt;,
## #   payments_over_base_pay &lt;dbl&gt;, percent_over_base_pay &lt;dbl&gt;,
## #   total_payments &lt;dbl&gt;, base_pay &lt;dbl&gt;, permanent_bonus_pay &lt;dbl&gt;,
## #   longevity_bonus_pay &lt;dbl&gt;, temporary_bonus_pay &lt;dbl&gt;, lump_sum_pay &lt;dbl&gt;,
## #   overtime_pay &lt;dbl&gt;, other_pay_adjustments &lt;dbl&gt;,
## #   other_pay_payroll_explorer &lt;dbl&gt;, mou &lt;dbl&gt;, mou_title &lt;chr&gt;,
## #   fms_department &lt;dbl&gt;, job_class &lt;dbl&gt;, pay_grade &lt;chr&gt;,
## #   average_health_cost &lt;dbl&gt;, average_dental_cost &lt;dbl&gt;,
## #   average_basic_life &lt;dbl&gt;, average_benefit_cost &lt;dbl&gt;, benefits_plan &lt;chr&gt;,
## #   job_class_link &lt;chr&gt;
```

---

Q. How many observations are available between 2013 and 2015 including 2013 and 2015?




```r
lapd %&gt;% 
  filter(year &gt;= 2013 &amp; year &lt;= 2015) %&gt;% 
  nrow()
```

```
## [1] 40227
```

---

Q. How many LAPD staff were employed full time in 2018?




```r
lapd %&gt;% 
  filter(employment_type == "Full Time" &amp; year == 2018) %&gt;% 
  nrow()
```

```
## [1] 14664
```

---

We have done all sorts of selections, slicing, filtering on `lapd` but it has not changed at all. Why do you think so?


```r
glimpse(lapd)
```

```
## Rows: 68,564
## Columns: 35
## $ row_id                     &lt;chr&gt; "3-1000027830ctFu", "3-1000155488ctFu", "3…
## $ year                       &lt;dbl&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, …
## $ department_title           &lt;chr&gt; "Police (LAPD)", "Police (LAPD)", "Police …
## $ payroll_department         &lt;dbl&gt; 4301, 4302, 4301, 4301, 4302, 4302, 4301, …
## $ record_number              &lt;dbl&gt; 1000027830, 1000155488, 1000194958, 100023…
## $ job_class_title            &lt;chr&gt; "Police Detective II", "Clerk Typist", "Po…
## $ employment_type            &lt;chr&gt; "Full Time", "Full Time", "Full Time", "Fu…
## $ hourly_or_event_rate       &lt;dbl&gt; 53.16, 23.77, 60.80, 60.98, 45.06, 34.42, …
## $ projected_annual_salary    &lt;dbl&gt; 110998.08, 49623.67, 126950.40, 127326.24,…
## $ q1_payments                &lt;dbl&gt; 24931.20, 11343.96, 24184.00, 29391.20, 20…
## $ q2_payments                &lt;dbl&gt; 29181.61, 13212.37, 28327.20, 36591.20, 24…
## $ q3_payments                &lt;dbl&gt; 26545.80, 11508.36, 28744.20, 32904.81, 21…
## $ q4_payments                &lt;dbl&gt; 29605.30, 13442.53, 33224.88, 37234.03, 25…
## $ payments_over_base_pay     &lt;dbl&gt; 4499.12, 1844.82, 13192.43, 18034.53, 1376…
## $ percent_over_base_pay      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, …
## $ total_payments             &lt;dbl&gt; 110263.91, 49507.22, 114480.28, 136121.24,…
## $ base_pay                   &lt;dbl&gt; 105764.79, 47662.40, 101287.85, 118086.71,…
## $ permanent_bonus_pay        &lt;dbl&gt; 3174.12, 0.00, 7363.95, 7086.67, 0.00, 0.0…
## $ longevity_bonus_pay        &lt;dbl&gt; 0.00, 1310.82, 0.00, 0.00, 1251.19, 1726.1…
## $ temporary_bonus_pay        &lt;dbl&gt; 1325.00, 0.00, 1205.00, 1325.00, 125.00, 6…
## $ lump_sum_pay               &lt;dbl&gt; 0.00, 0.00, 2133.18, 0.00, 2068.80, 0.00, …
## $ overtime_pay               &lt;dbl&gt; 0.00, 0.00, 4424.32, 9839.33, 0.00, 0.00, …
## $ other_pay_adjustments      &lt;dbl&gt; 0.00, 534.00, -1934.02, -216.47, -2068.80,…
## $ other_pay_payroll_explorer &lt;dbl&gt; 4499.12, 1844.82, 8768.11, 8195.20, 1376.1…
## $ mou                        &lt;dbl&gt; 24, 3, 24, 24, 12, 3, 24, 24, 24, 24, 24, …
## $ mou_title                  &lt;chr&gt; "POLICE OFFICERS UNIT", "CLERICAL UNIT", "…
## $ fms_department             &lt;dbl&gt; 70, 70, 70, 70, 70, 70, 70, 70, 70, 70, 70…
## $ job_class                  &lt;dbl&gt; 2223, 1358, 2227, 2232, 1839, 2207, 2214, …
## $ pay_grade                  &lt;chr&gt; "2", "0", "1", "1", "0", "2", "3", "1", "B…
## $ average_health_cost        &lt;dbl&gt; 11651.40, 10710.24, 11651.40, 11651.40, 10…
## $ average_dental_cost        &lt;dbl&gt; 898.08, 405.24, 898.08, 898.08, 405.24, 40…
## $ average_basic_life         &lt;dbl&gt; 191.04, 11.40, 191.04, 191.04, 11.40, 11.4…
## $ average_benefit_cost       &lt;dbl&gt; 12740.52, 11126.88, 12740.52, 12740.52, 11…
## $ benefits_plan              &lt;chr&gt; "Police", "City", "Police", "Police", "Cit…
## $ job_class_link             &lt;chr&gt; "http://per.lacity.org/perspecs/2223.pdf",…
```

---

Moving forward we are only going to focus on year 2018, and use `job_class_title`, `employment_type`, and `base_pay`. Let's clean our data accordingly and move on with the smaller `lapd` data that we need.

---


```r
lapd %&gt;% 
  filter(year == 2018) %&gt;% 
  select(job_class_title, 
         employment_type, 
         base_pay)
```

```
## # A tibble: 14,824 x 3
##    job_class_title                  employment_type base_pay
##    &lt;chr&gt;                            &lt;chr&gt;              &lt;dbl&gt;
##  1 Police Detective II              Full Time        119322.
##  2 Police Sergeant I                Full Time        113271.
##  3 Police Lieutenant II             Full Time        148116 
##  4 Police Service Representative II Full Time         78677.
##  5 Police Officer III               Full Time        109374.
##  6 Police Officer II                Full Time         95002.
##  7 Police Officer II                Full Time         95379.
##  8 Police Officer II                Full Time         95388.
##  9 Equipment Mechanic               Full Time         80496 
## 10 Detention Officer                Full Time         69640 
## # … with 14,814 more rows
```

---


```r
lapd &lt;- 
  lapd %&gt;% 
  filter(year == 2018) %&gt;% 
  select(job_class_title, 
         employment_type, 
         base_pay)
```
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"ratio": "16:9",
"highlightStyle": "pygments",
"highlightLines": true,
"highlightLanguage": "r"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
